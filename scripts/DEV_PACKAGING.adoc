= Packaging & Pi Zero Guide (Hemingway style)

== Local dev venv

.Create a venv in the repo and install script deps:
[,bash]
----
bash scripts/setup_venv.sh
source scripts/venv/bin/activate
pip install --upgrade pip
----

.Run quick tests:
[,bash]
----
python3 scripts/run_unit_tests.py
# If you have pytest:
python3 -m pytest -q
----

.Clean up:
[,bash]
----
./scripts/clean_venv.sh
----

== Pre-commit

.Install hooks (optional but recommended):
[,bash]
----
pip install pre-commit ruff black
pre-commit install --install-hooks || true
pre-commit run --all-files
----

== Docker build (dev machine)

.Build and run locally from `docker-wainlux`:
[,bash]
----
cd docker-wainlux
docker compose build
docker compose up -d
----

* If build fails: read logs, fix, repeat. Keep builds small and focused.

== Build on Pi Zero (notes)

* Pi Zero is slow and has little RAM. You need 1GB swap for the build.

.Enable swap temporarily (example):
[,bash]
----
sudo fallocate -l 1G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
# build
cd docker-wainlux
docker compose build
# when done, remove swap
sudo swapoff /swapfile
sudo rm /swapfile
----

* Builds take time (~15â€“30 minutes). Watch logs. If it chokes, increase swap.

== Keep it simple
* Rebuild from scratch. If it breaks, write a short script to recreate the problem.
* Document exact commands so others can reproduce. Be brief. Be clear.
