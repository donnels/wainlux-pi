= ADR-009: Docker Containerization

== Status

Accepted

== Context

Need to deploy Flask app to Pi Zero W. Must handle Python dependencies (Pillow, pyserial, Flask).

.Options
* Docker containerization
* Bare Pi Python installation (manual pip install)
* Virtual environment with systemd service
* Package as .deb

== Decision

Use Docker containerization.

== Rationale

*Recipe-based deployment:* Dockerfile is executable documentation. No hidden steps. No "it works on my machine."

*Migration path:* Container runs anywhere. Move to different Pi? Copy container. Move to x86? Rebuild from same Dockerfile.

*Isolation:* System dependencies (libjpeg, libxcb) in container. No system pollution. Clean uninstall = remove container.

*Reproducibility:* Same Dockerfile â†’ same environment. Every build identical.

*Version control:* Infrastructure as code. Dockerfile in git. Changes tracked.

Considered bare Python: Faster boot, simpler. But deployment = manual documentation. Migration = rewrite install steps.

Virtual environment: Better than bare but still system-dependent. Migration still requires docs.

.deb package: Most "Pi native" but hardest to maintain. Cross-compilation needed. Overkill for single app.

== Consequences

.*Positive*
* Deployment = recipe, not procedure
* Migration to new hardware trivial
* Dependencies isolated
* Build reproducible
* Easy rollback (image tags)

.*Negative*
* Docker layer adds complexity
* Slightly slower startup
* Need Docker knowledge
* More disk space (120MB base image)

*Trade-off accepted:* Portability and reproducibility outweigh Docker overhead.
