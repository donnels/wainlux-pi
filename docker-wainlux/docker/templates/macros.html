{# 
Jinja2 macros for shared UI components
Usage: {% from 'macros.html' import macro_name %}
#}

{# Unified navigation header with status info - used on all pages #}
{% macro navigation(current_page) %}
<div class="section" style="border-bottom: 1px solid #fff; padding-bottom: 10px; margin-bottom: 20px;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
        <h1>{{ current_page }}</h1>
        <div>
            {% if current_page != "WAINLUX K6" %}
            <a href="/" style="color: #fff; text-decoration: none; margin-right: 20px;">← HOME</a>
            {% endif %}
            {% if current_page != "SETTINGS" %}
            <a href="/settings" style="color: #fff; text-decoration: none;">⚙ SETTINGS</a>
            {% endif %}
        </div>
    </div>
    
    {# Status bar with mode, firmware, and verification state #}
    <div id="statusBar" style="display: flex; justify-content: space-between; align-items: center; font-size: 0.9em; padding: 8px; border: 1px solid #fff; font-family: monospace;">
        <span id="modeDisplay">Mode: Loading...</span>
        <span id="firmwareDisplay">Firmware: —</span>
        <span id="verifyDisplay" style="display: none; color: #0f0;">✓ Verified</span>
    </div>
</div>
{% endmacro %}

{# Test control buttons - work regardless of connection state #}
{% macro test_controls(connected=false) %}
<div class="section">
    <h2>TEST</h2>
    <button id="btnBounds">DRAW BOUNDS</button>
    <button id="btnHome">HOME</button>
    <button id="btnStop">EMERGENCY STOP</button>
</div>
{% endmacro %}

{# Power input field #}
{% macro power_input(id, label="POWER:", value=1000, connected=false) %}
<div class="form-row">
    <label for="{{ id }}">{{ label }}</label>
    <input type="number" id="{{ id }}" value="{{ value }}" min="0" max="1000" step="10" 
           style="width: 100px;" {% if not connected %}disabled{% endif %}>
    <span class="info" style="font-size: 0.85em;">(0-1000)</span>
</div>
{% endmacro %}

{# Depth input field #}
{% macro depth_input(id, label="DEPTH:", value=100, connected=false) %}
<div class="form-row">
    <label for="{{ id }}">{{ label }}</label>
    <input type="number" id="{{ id }}" value="{{ value }}" min="1" max="255" 
           style="width: 100px;" {% if not connected %}disabled{% endif %}>
    <span class="info" style="font-size: 0.85em;">(1-255)</span>
</div>
{% endmacro %}

{# Progress bars section #}
{% macro progress_bars() %}
<div id="progressSection" style="display: none; margin-top: 20px;">
    <h3>BURN PROGRESS</h3>
    
    <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
            <span>SETUP</span>
            <span id="setupText" style="font-weight: bold;">0%</span>
        </div>
        <div class="progress-bar">
            <div id="setupFill" class="progress-fill"></div>
        </div>
    </div>
    
    <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
            <span>UPLOAD</span>
            <span id="uploadText" style="font-weight: bold;">0%</span>
        </div>
        <div class="progress-bar">
            <div id="uploadFill" class="progress-fill"></div>
        </div>
    </div>
    
    <div style="margin-bottom: 15px;">
        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
            <span>BURN</span>
            <span id="burnText" style="font-weight: bold;">0%</span>
        </div>
        <div class="progress-bar">
            <div id="burnFill" class="progress-fill"></div>
        </div>
    </div>
</div>
{% endmacro %}

{# Log display box #}
{% macro log_display() %}
<div style="margin-top: 20px;">
    <h3>LOG</h3>
    <div id="logBox"></div>
</div>
{% endmacro %}

{# Message display area #}
{% macro message_display() %}
<div id="message"></div>
{% endmacro %}

{# Info box with optional warning style #}
{% macro info_box(text, is_warning=false) %}
<div class="info {% if is_warning %}warning{% endif %}" style="margin-bottom: 15px;">
    {{ text }}
</div>
{% endmacro %}
